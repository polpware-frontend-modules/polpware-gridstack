{"version":3,"file":"libria-gridstack.js","sources":["ng://@libria/gridstack/lib/components/gridstack-item.component.ts","ng://@libria/gridstack/lib/services/gridstack.service.ts","ng://@libria/gridstack/lib/components/gridstack.component.ts","ng://@libria/gridstack/lib/gridstack.module.ts","ng://@libria/gridstack/public-api.ts","ng://@libria/gridstack/libria-gridstack.ts"],"sourcesContent":["import {\n    AfterViewInit,\n    Component,\n    ElementRef,\n    Input,\n    Renderer2,\n    ViewEncapsulation,\n} from '@angular/core';\nimport { GridItem } from './models/grid-item';\n\ndeclare var _: any;\nlet _sequence = 0;\n\n@Component({\n    // tslint:disable-next-line:component-selector\n    selector: 'div[lb-gridstack-item]',\n    templateUrl: './gridstack-item.component.html',\n    styleUrls: ['./gridstack-item.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class GridstackItemComponent implements AfterViewInit, GridItem {\n    @Input() public x: number | string;\n    @Input() public y: number | string;\n    @Input() public width: number | string;\n    @Input() public height: number | string;\n    @Input() public id: string;\n    @Input('max-width') public maxWidth: number | string;\n    @Input('max-height') public maxHeight: number | string;\n    @Input('min-width') public minWidth: number | string;\n    @Input('min-height') public minHeight: number | string;\n    @Input('no-resize') public noResize: boolean | string;\n    @Input('no-move') public noMove: boolean | string;\n    @Input('auto-position') public autoPosition: boolean | string;\n    @Input() public locked: boolean | string;\n    public generatedId: string = (_sequence++).toString();\n\n    constructor(public elem: ElementRef,\n                private _renderer: Renderer2\n    ) { }\n\n    public ngAfterViewInit() {\n        this._renderer.addClass(this.elem.nativeElement, 'grid-stack-item');\n        this._setAttributeIfNotUndefined('data-gs-x', this.x);\n        this._setAttributeIfNotUndefined('data-gs-y', this.y);\n        this._setAttributeIfNotUndefined('data-gs-width', this.width);\n        this._setAttributeIfNotUndefined('data-gs-height', this.height);\n        this._setAttributeIfNotUndefined('data-gs-id', this.id);\n        this._setAttributeIfNotUndefined('data-gs-max-width', this.maxWidth);\n        this._setAttributeIfNotUndefined('data-gs-max-height', this.maxHeight);\n        this._setAttributeIfNotUndefined('data-gs-min-width', this.minWidth);\n        this._setAttributeIfNotUndefined('data-gs-min-height', this.minHeight);\n\n        this._setAttributeIfTrue('data-gs-no-resize', this.noResize);\n        this._setAttributeIfTrue('data-gs-no-move', this.noMove);\n        this._setAttributeIfTrue('data-gs-auto-position', this.autoPosition);\n        this._setAttributeIfTrue('data-gs-locked', this.locked);\n    }\n\n    private _setAttributeIfNotUndefined(attrName: string, val: number | string): void {\n        if (!_.isNull(val) && !_.isUndefined(val)) {\n            this._renderer.setAttribute(this.elem.nativeElement, attrName, val.toString());\n        }\n    }\n\n    private _setAttributeIfTrue(attrName: string, val: boolean | string): void {\n        if (val === true || val === 'true') {\n            this._renderer.setAttribute(this.elem.nativeElement, attrName, 'true');\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Grid } from '../components/models/grid';\nimport { GridItem } from '../components/models/grid-item';\n\n@Injectable()\nexport class GridstackService {\n    private _gridItems: {\n        gridId: string;\n        item: GridItem;\n    }[] = [];\n\n    private _grids: Grid[] = [];\n\n    constructor() { }\n\n    public addGrid(grid: Grid) {\n        this._grids.push(grid);\n    }\n\n    public removeGrid(grid: Grid) {\n        this._grids.splice(this._grids.findIndex(g => g.generatedId == grid.generatedId), 1);\n        this._gridItems = this._gridItems.filter(gi => gi.gridId != grid.generatedId);\n    }\n\n    public attachGridItem(gridId: string, gridItemId: string) {\n        this._gridItems.find(gi => gi.item.generatedId == gridItemId).gridId = gridId;\n    }\n\n    public detachGridItemIfExists(gridItemId: string) {\n        const gridItem = this._gridItems.find(gi => gi.item.generatedId == gridItemId);\n\n        if (!!gridItem) {\n            gridItem.gridId = null;\n        }\n    }\n\n    public getGridItems(gridId: string) {\n        return this._gridItems.filter(gi => gi.gridId == gridId).map(g => g.item);\n    }\n\n    public getOrphanGridItems() {\n        return this._gridItems.filter(gi => gi.gridId == null).map(g => g.item);\n    }\n\n    public addOrphanGridItem(gridItem: GridItem) {\n        this._gridItems.push({\n            gridId: null,\n            item: gridItem\n        });\n    }\n\n    public removeGridItem(gridItemId: string) {\n        this._gridItems.splice(this._gridItems.findIndex(gi => gi.item.generatedId == gridItemId), 1);\n    }\n}\n","import { GridstackOptions } from './models/gridstack-options';\nimport {\n    AfterViewInit,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgZone,\n    Output,\n    QueryList,\n    Renderer2,\n    ViewEncapsulation,\n    OnInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges,\n} from '@angular/core';\n\ndeclare var _: any;\nlet _sequence = 0;\ndeclare var GridStack: any;\n\nimport { GridstackItemComponent } from './gridstack-item.component';\nimport { Item } from './models/item';\nimport { GridstackService } from '../services/gridstack.service';\nimport { Grid } from './models/grid';\nimport { GridItem } from './models/grid-item';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n    // tslint:disable-next-line:component-selector\n    selector: 'div[lb-gridstack]',\n    templateUrl: './gridstack.component.html',\n    styleUrls: ['./gridstack.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class GridstackComponent implements OnInit, OnDestroy, AfterViewInit, OnChanges, Grid {\n    @ContentChildren(GridstackItemComponent) public gridstackItems: QueryList<GridstackItemComponent>;\n    @Input() public options: GridstackOptions;\n    @Input() public animate: boolean | string;\n    @Input() public width: number | string;\n    @Input() public height: number | string;\n\n    @Output() public change = new EventEmitter<Item[]>();\n    @Output() public added = new EventEmitter<Item[]>();\n    @Output() public removed = new EventEmitter<Item[]>();\n    @Output() public dragstart = new EventEmitter();\n    @Output() public dragstop = new EventEmitter();\n    @Output() public resizestart = new EventEmitter();\n    @Output() public gsresizestop = new EventEmitter();\n\n    public generatedId = (_sequence++).toString();\n\n    private _gridstack: any;\n\n    private _ngUnsubscribe = new Subject();\n\n    constructor(private _zone: NgZone,\n        private _el: ElementRef,\n        private _renderer: Renderer2,\n        private _gridstackService: GridstackService) { }\n\n    public ngOnInit(): void {\n        if (this.options && this.options.acceptWidgets != null) {\n            console.error('acceptWidgets option not supported yet!');\n        }\n\n        this._zone.runOutsideAngular(() => {\n            this._renderer.addClass(this._el.nativeElement, 'grid-stack');\n\n            if (this._isValueTrue(this.animate)) {\n                this._renderer.setAttribute(this._el.nativeElement, 'data-gs-animate', 'true');\n            }\n\n            this._setAttributeIfNotUndefined('data-gs-column', this.width);\n            this._setAttributeIfNotUndefined('data-gs-height', this.height);\n\n            const width = this.width || (this.options || {}).width;\n\n            if (!_.isNull(width) && !_.isUndefined(width)) {\n                this._renderer.addClass(this._el.nativeElement, `grid-stack-${width}`);\n            }\n\n            this._gridstack = GridStack.init(this.options, this._el.nativeElement);\n\n            const el = $(this._el.nativeElement);\n            $(el).data('generated-id', this.generatedId);\n\n            this._gridstackService.addGrid(this);\n\n            // Hook events\n            this._gridstack.on('added', (evt: any, items: Item[]) => {\n                const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\n                const existingItemIds: string[] = (this._gridstack as any).engine.nodes.map(i => $(i.el)\n                    .attr('class')\n                    .split(/\\s+/)\n                    .find(s => s.startsWith('lb-generated-id-'))\n                    .replace('lb-generated-id-', ''));\n\n                const itemsToAdd = existingItemIds.filter(i => !itemsOfCurrentGrid.some(ei => ei.generatedId === i));\n                itemsToAdd.forEach(i => this._gridstackService.attachGridItem(this.generatedId, i));\n\n                this.added.emit(items);\n            });\n\n            this._gridstack.on('change', (evt: any, items: Item[]) => {\n                this.change.emit(items);\n            });\n\n            this._gridstack.on('dragstart', (evt: any, ui: any) => {\n                this.dragstart.emit(evt);\n            });\n\n            this._gridstack.on('dragstop', (evt: any, ui: any) => {\n                this.dragstop.emit(evt);\n            });\n\n            this._gridstack.on('resizestart', (evt: any, ui: any) => {\n                this.resizestart.emit(evt);\n            });\n\n            this._gridstack.on('gsresizestop', (evt: any, ui: any) => {\n                this.gsresizestop.emit(evt);\n            });\n\n            this._gridstack.on('removed', (evt: any, items: Item[]) => {\n                const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\n                const existingItemIds: string[] = (this._gridstack as any).engine.nodes.map(i => $(i.el)\n                    .attr('class')\n                    .split(/\\s+/)\n                    .find(s => s.startsWith('lb-generated-id-'))\n                    .replace('lb-generated-id-', ''));\n\n                const itemsToDelete = itemsOfCurrentGrid.filter(i => !existingItemIds.some(ei => ei === i.generatedId));\n                itemsToDelete.forEach(i => this._gridstackService.detachGridItemIfExists(i.generatedId));\n                this.removed.emit(items);\n            });\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        const heightChanges = changes.height;\n        const optionsChanges = changes.options;\n\n        if (heightChanges && !heightChanges.isFirstChange() && heightChanges.currentValue !== heightChanges.previousValue) {\n            this._updateGridstackHeight(+heightChanges.currentValue);\n        }\n\n        if (optionsChanges && !optionsChanges.isFirstChange()) {\n            const prev: GridstackOptions = optionsChanges.previousValue;\n            const curr: GridstackOptions = optionsChanges.currentValue;\n\n            if (curr.cellHeight !== prev.cellHeight) {\n                this._updateGridstackHeight(curr.cellHeight);\n            }\n        }\n    }\n\n    public ngAfterViewInit(): void {\n        this.gridstackItems.changes\n            .pipe(takeUntil(this._ngUnsubscribe))\n            .subscribe(changes => {\n                this._handleItemChanges(this.gridstackItems.toArray());\n            });\n\n        this._handleItemChanges(this.gridstackItems.toArray());\n    }\n\n    public ngOnDestroy(): void {\n        this._ngUnsubscribe.next();\n        this._gridstack.destroy();\n        this._gridstackService.removeGrid(this);\n    }\n\n    private _updateGridstackHeight(height: number | string) {\n        this._zone.runOutsideAngular(() => {\n            this._gridstack.cellHeight(height as any);\n        });\n    }\n\n    private _handleItemChanges(items: GridstackItemComponent[]): void {\n        const itemsOfCurrentGrid = this._gridstackService.getGridItems(this.generatedId);\n        const itemsToAdd = items.filter(i => !itemsOfCurrentGrid.some(w => w.generatedId === i.generatedId));\n        const itemsToRemove = itemsOfCurrentGrid.filter(w => !items.some(i => i.generatedId === w.generatedId));\n\n        this._gridstack.batchUpdate();\n        itemsToAdd.forEach(i => this._addItem(i));\n        itemsToRemove.forEach(i => this._removeItem(i));\n        this._gridstack.commit();\n    }\n\n    private _addItem(item: GridstackItemComponent): void {\n        this._zone.runOutsideAngular(() => {\n            if (this._gridstack.willItFit(+item.x, +item.y, +item.width, +item.height, this._isValueTrue(item.autoPosition))) {\n                this._gridstackService.addOrphanGridItem(item);\n                $(item.elem.nativeElement).addClass('lb-generated-id-' + item.generatedId);\n                this._gridstack.makeWidget(item.elem.nativeElement);\n            } else {\n                console.error('Not enough free space to place the widget');\n            }\n        });\n    }\n\n    private _removeItem(item: GridItem): void {\n        this._gridstackService.removeGridItem(item.generatedId);\n\n        this._zone.runOutsideAngular(() => {\n            this._gridstack.removeWidget(item.elem.nativeElement);\n        });\n    }\n\n    private _setAttributeIfNotUndefined(attrName: string, val: number | string): void {\n        if (!_.isNull(val) && !_.isUndefined(val)) {\n            this._renderer.setAttribute(this._el.nativeElement, attrName, val.toString());\n        }\n    }\n\n    private _isValueTrue(val: boolean | string) {\n        return (val === true || val === 'true');\n    }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GridstackComponent } from './components/gridstack.component';\nimport { GridstackItemComponent } from './components/gridstack-item.component';\nimport { GridstackService } from './services/gridstack.service';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        GridstackComponent,\n        GridstackItemComponent],\n    exports: [\n        GridstackComponent,\n        GridstackItemComponent]\n})\nexport class GridstackModule {\n    public static forRoot(): ModuleWithProviders<GridstackModule> {\n        return {\n            ngModule: GridstackModule,\n            providers: [\n                GridstackService\n            ]\n        };\n    }\n}\n","/*\n * Public API Surface of gridstack\n */\n\nexport * from './lib/export';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {GridstackService as ɵa} from './lib/services/gridstack.service';"],"names":["_sequence"],"mappings":"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"}